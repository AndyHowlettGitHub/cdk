<chapter id="sect:htmlgeneration">
  <title>HTML Generation</title>
  <para>
    Most of the website is nowadays part of the Plone website
    hosted at the CUBIC. Some content on the website is, however,
    still autogenerated, and uploaded to the Plone FTP server.
  </para>
  <para>
    For example, the 
    <ulink url="http://almost.cubic.uni-koeln.de/cdk/cdk_top/docu/dictrefindex/">http://almost.cubic.uni-koeln.de/cdk/cdk_top/docu/dictrefindex/</ulink>
    page is created from CVS content, by doing:
    <programlisting>
> cdk cdk/doc/javadoc
> ant dictref.index
> xsltproc dictRefs2HTML.xsl index_html
    </programlisting>
    Then this file is uploaded to the Plone FTP server at
    almost.cubic.uni-koeln.de (Ask Christoph for upload access).
    At the time of writing I had to scp the file and upload
    to the FTP server from there.
  </para>
  <para>
    The Bourne shell script I used for this looks like (thanx to Tobias for
    providing this script):
    <programlisting>
#!/bin/sh
USER='FillIn'
PASSWD='SecretPwd'
ftp -n almost.cubic.uni-koeln.de 8021 &lt;&lt;EOF
quote USER $USER
quote PASS $PASSWD
cd /cdk/cdk_top/docu/dictrefindex
put index_html
bye
EOF
exit 0
    </programlisting>
    I have these files saved in my home directory on almost as
    <filename>upload.dictref.index.sh</filename> so that I can do from my machine
    at home:
    <programlisting>
> scp index_html almost.cubic.uni-koeln.de:~/.
> ssh almost.cubic.uni-koeln.de "sh ~/upload.dictref.index.sh"
    </programlisting>
    so that I don't have to login.
  </para>
  <para>
    Similar things can be done for the other autogenerated pages. Below is a list
    of details you need to know to set things up.
  </para>
  <informaltable>
    <tgroup cols="3">
    <tbody>
      <row>
        <entry>CDK dir</entry>
        <entry>ant target</entry>
        <entry>XML file</entry>
        <entry>XSLT stylesheet</entry>
        <entry>Plone FTP directory</entry>
      </row>
      <row>
        <entry>cdk/</entry>
        <entry></entry>
        <entry>changelog.xml</entry>
        <entry>doc/website/changelog2HTML.xsl</entry>
        <entry>/cdk/cdk_top/docu/changelog</entry>
      </row>
      <row>
        <entry>cdk/doc/javadoc</entry>
        <entry>dictref.index</entry>
        <entry>dictref.index.xml</entry>
        <entry>dictRefs2HTML.xsl</entry>
        <entry>/cdk/cdk_top/docu/dictrefindex</entry>
      </row>
      <row>
        <entry>cdk/doc/javadoc</entry>
        <entry>keyword.index</entry>
        <entry>keyword.index.xml</entry>
        <entry>keywordIndex2HTML.xsl</entry>
        <entry>/cdk/cdk_top/docu/featurefolder</entry>
      </row>
      <row>
        <entry>cdk/doc/website</entry>
        <entry>javancss</entry>
        <entry>javancss-tmp.xml</entry>
        <entry>javancss2html.xsl</entry>
        <entry>/cdk/cdk_top/devel/quality/source_stats</entry>
      </row>
      <row>
        <entry>cdk/doc/website</entry>
        <entry>javancss</entry>
        <entry>javancss-tmp.xml</entry>
        <entry>javancss-javadoc2html.xsl</entry>
        <entry>/cdk/cdk_top/devel/quality/javadoc_stats</entry>
      </row>
      <row>
        <entry>cdk/</entry>
        <entry>pmd-data (in pmd.xml)</entry>
        <entry>reports/pmd/data.xml</entry>
        <entry>doc/website/pmdReport2HTML.xsl</entry>
        <entry>/cdk/cdk_top/devel/modules/module-data/pmd</entry>
      </row>
      <row>
        <entry>cdk/</entry>
        <entry>pmd-core (in pmd.xml)</entry>
        <entry>reports/pmd/core.xml</entry>
        <entry>doc/website/pmdReport2HTML.xsl</entry>
        <entry>/cdk/cdk_top/devel/modules/module-core/pmd</entry>
      </row>
    </tbody>
    </tgroup>
  </informaltable>
  <para>
    If you cleverly substitute the values in the above table in the commands
    and scripts earlier in this chapter, you have a working system. And, for
    brevity, I left out all lines for other CDK modules; with these two
    examples, it should be clear what's going on there. To upload all PMD reports,
    it's wise to setup a script, e.g. like:
    <programlisting>
#!/bin/sh
xsltproc doc/website/pmdReport2HTML.xsl reports/pmd/data.xml         > reports/pmd/data.html
xsltproc doc/website/pmdReport2HTML.xsl reports/pmd/core.xml         > reports/pmd/core.html
xsltproc doc/website/pmdReport2HTML.xsl reports/pmd/standard.xml     > reports/pmd/standard.html
xsltproc doc/website/pmdReport2HTML.xsl reports/pmd/extra.xml        > reports/pmd/extra.html
xsltproc doc/website/pmdReport2HTML.xsl reports/pmd/render.xml       > reports/pmd/render.html
xsltproc doc/website/pmdReport2HTML.xsl reports/pmd/applications.xml > reports/pmd/applications.html
xsltproc doc/website/pmdReport2HTML.xsl reports/pmd/io.xml           > reports/pmd/io.html
xsltproc doc/website/pmdReport2HTML.xsl reports/pmd/qsar.xml         > reports/pmd/qsar.html
xsltproc doc/website/pmdReport2HTML.xsl reports/pmd/builder3d.xml    > reports/pmd/builder3d.html

scp reports/pmd/data.html         almost:~/index_html &amp;&amp; ssh almost "sh ~/upload.pmd.data.sh"
scp reports/pmd/core.html         almost:~/index_html &amp;&amp; ssh almost "sh ~/upload.pmd.core.sh"
scp reports/pmd/standard.html     almost:~/index_html &amp;&amp; ssh almost "sh ~/upload.pmd.standard.sh"
scp reports/pmd/extra.html        almost:~/index_html &amp;&amp; ssh almost "sh ~/upload.pmd.extra.sh"
scp reports/pmd/render.html       almost:~/index_html &amp;&amp; ssh almost "sh ~/upload.pmd.render.sh"
scp reports/pmd/applications.html almost:~/index_html &amp;&amp; ssh almost "sh ~/upload.pmd.applications.sh"
scp reports/pmd/io.html           almost:~/index_html &amp;&amp; ssh almost "sh ~/upload.pmd.io.sh"
scp reports/pmd/qsar.html         almost:~/index_html &amp;&amp; ssh almost "sh ~/upload.pmd.qsar.sh"
scp reports/pmd/builder3d.html    almost:~/index_html &amp;&amp; ssh almost "sh ~/upload.pmd.builder3d.sh"
    </programlisting>
  </para>
  
</chapter>
