<chapter id="sect:htmlgeneration">
  <title>HTML Generation</title>
  <para>
    Most of the website is nowadays part of the Plone website
    hosted at the CUBIC. Some content on the website is, however,
    still autogenerated, and uploaded to the Plone FTP server.
  </para>
  <para>
    For example, the 
    <ulink url="http://almost.cubic.uni-koeln.de/cdk/cdk_top/docu/dictrefindex/">http://almost.cubic.uni-koeln.de/cdk/cdk_top/docu/dictrefindex/</ulink>
    page is created from CVS content, by doing:
    <programlisting>
> cdk cdk/doc/javadoc
> ant dictref.index
> xsltproc dictRefs2HTML.xsl index_html
    </programlisting>
    Then this file is uploaded to the Plone FTP server at
    almost.cubic.uni-koeln.de (Ask Christoph for upload access).
    At the time of writing I had to scp the file first to almost, and upload
    to the FTP server from there.
  </para>
  <para>
    The Bourne shell script I used for this looks like (thanx to Tobias for
    providing this script):
    <programlisting>
#!/bin/sh
USER='FillIn'
PASSWD='SecretPwd'
ftp -n almost.cubic.uni-koeln.de 8021 &lt;&lt;EOF
quote USER $USER
quote PASS $PASSWD
cd /cdk/cdk_top/docu/dictrefindex
put index_html
bye
EOF
exit 0
    </programlisting>
    I have this files saved in my home directory on almost as
    <filename>upload.dictref.index.sh</filename> so that I can do from my machine
    at home:
    <programlisting>
> scp index_html almost.cubic.uni-koeln.de:~/.
> ssh almost.cubic.uni-koeln.de "sh ~/upload.dictref.index.sh"
    </programlisting>
    so that I don't have to login.
  </para>
  <para>
    Similar things can be done for the other autogenerated pages. Below is a list
    of details you need to know to set things up.
  </para>
  <informaltable>
    <tgroup cols="3">
    <tbody>
      <row>
        <entry>CDK dir</entry>
        <entry>ant target</entry>
        <entry>XML file</entry>
        <entry>XSLT stylesheet</entry>
        <entry>Plone FTP directory</entry>
      </row>
      <row>
        <entry>cdk/doc/javadoc</entry>
        <entry>dictref.index</entry>
        <entry>dictref.index.xml</entry>
        <entry>dictRefs2HTML.xsl</entry>
        <entry>/cdk/cdk_top/docu/dictrefindex</entry>
      </row>
      <row>
        <entry>cdk/doc/javadoc</entry>
        <entry>keyword.index</entry>
        <entry>keyword.index.xml</entry>
        <entry>keywordIndex2HTML.xsl</entry>
        <entry>/cdk/cdk_top/docu/featurefolder</entry>
      </row>
      <row>
        <entry>cdk/</entry>
        <entry>pmd-data (in pmd.xml)</entry>
        <entry>reports/pmd/data.xml</entry>
        <entry>doc/website/pmdReport2HTML.xsl</entry>
        <entry>/cdk/cdk_top/devel/modules/module-data/pmd</entry>
      </row>
      <row>
        <entry>cdk/</entry>
        <entry>pmd-core (in pmd.xml)</entry>
        <entry>reports/pmd/core.xml</entry>
        <entry>doc/website/pmdReport2HTML.xsl</entry>
        <entry>/cdk/cdk_top/devel/modules/module-core/pmd</entry>
      </row>
    </tbody>
    </tgroup>
  </informaltable>
  <para>
    If you cleverly substitute the values in the above table in the commands
    and scripts earlier in this chapter, you have a working system.
  </para>
  <para>
    For some files it's even simpler; for example for the ChangeLog which does
    not require any transformation, and which can simply be uploaded (At the time
    of writing this is *NOT* working):
    <programlisting>
> cd cdk/
> scp CHANGELOG almost.cubic.uni-koeln.de:~/index_html
> ssh almost.cubic.uni-koeln.de "sh ~/upload.changelog.sh"
    </programlisting>
    Below is an overview of files that need to be uploaded. Again, make custom
    upload scripts like <filename>upload.changelog.sh</filename> to make sure
    the file is uploaded to the correct directory on the Plone FTP server.
  </para>
  <informaltable>
    <tgroup cols="3">
    <tbody>
      <row>
        <entry>CDK dir</entry>
        <entry>file</entry>
        <entry>Plone FTP directory</entry>
      </row>
      <row>
        <entry>cdk/</entry>
        <entry>CHANGELOG</entry>
        <entry>/cdk/cdk_top/docu/changelog</entry>
      </row>
    </tbody>
    </tgroup>
  </informaltable>
  
</chapter>
