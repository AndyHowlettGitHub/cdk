<project name="CDK" default="html" basedir=".">

    <property name="javadoc.dir" value="doc/api" />
    <property name="pathtojava3d" value="" />
    <property name="build" value="build" />
    <property name="src" value="src" />

    <path id="project.class.path">
        <pathelement location="." />
        <fileset dir="jar">
            <include name="*.jar" />
        </fileset>
        <fileset dir="jar/libio">
            <include name="*.jar" />
        </fileset>
        <fileset dir="${pathtojava3d}">
            <include name="*.jar" />
        </fileset>
    </path>

    <path id="fop.class.path">
        <fileset dir="doc/jar">
            <include name="*.jar" />
        </fileset>
    </path>

    <target name="html">        
        <mkdir dir="${javadoc.dir}" />

        <!-- Call javacc target in build.xml to re-generate the source code -->
        <ant antfile="build.xml" target="javacc"/>

        <javadoc destdir="${javadoc.dir}"
                 author="true" version="true" use="true"
                 public="true"
                 windowtitle="CDK API">
            <classpath refid="project.class.path" />
            <tag name="cdk.module" scope="all" description="Belongs to CDK module:" />
            <tag name="cdk.keyword" scope="all" description="Keywords:" />
            <tag name="cdk.created" scope="all" description="Created on:" />
            <tag name="cdk.require" scope="all" description="Requires:" />
            <tag name="cdk.depends" scope="all" description="Required library to be able to run this class:" />
            <tag name="cdk.builddepends" scope="all" description="Required library to be able to compile this class:" />
            <packageset dir="${src}" defaultexcludes="yes">
                <include name="org/openscience/cdk/**" />
                <exclude name="org/openscience/cdk/test/**"/>
            </packageset>
        </javadoc>
    </target>

    <target name="core.docbook">
        <javadoc private="false" public="true"
                 excludepackagenames="org.openscience.cdk.test.*">
            <classpath refid="project.class.path" />

            <doclet name="com.mf.doclet.docbook.DocBookDoclet"
                    path="jar/dbdoclet.jar">
                <param name="-properties" value="jar/dbdoclet.properties"/>
            </doclet>
            <package name="org.openscience.cdk"/>
            <sourcepath>
                <pathelement path="${src}"/>
            </sourcepath>
        </javadoc>
        <copy file="javadoc.dbxml"
              tofile="core.dbxml" />
    </target>

    <target name="core.fo">
        <!-- alternatively, you can use the much faster xsltproc -->
        <java classname="org.apache.xalan.xslt.Process"
              args="-IN core.dbxml -XSL doc/lib/xslt/docbook/fo/docbook.xsl -OUT core.fo"
              dir="." fork="yes">
            <classpath refid="fop.class.path" />
        </java>
    </target>

    <target name="core.pdf">
        <java classname="org.apache.fop.apps.Fop"
              args="-fo core.fo -pdf core.pdf"
              dir="." fork="yes">
            <classpath refid="fop.class.path" />
        </java>
    </target>

  <target name="jjdoc" description="Create JJDoc documentation from the .jj file">   
    <mkdir dir="doc/iupac-parser"/>
    <jjdoc target="${src}/org/openscience/cdk/iupac/parser/NomParser.jj"
      outputfile="doc/iupac-parser/ParserBNF.html"
      javacchome="jar"/>
  </target>

    <!-- The doclet used in the following targets cannot be put in CVS because it is 
         licensed otherwise, but it can be downloaded from:
         
         http://java.sun.com/j2se/javadoc/doccheck/
         
      -->
          
    <target name="doccheck">
        <mkdir dir="reports/doccheck"/>
        <javadoc private="false" public="true"
                 destdir="reports/doccheck/"
                 excludepackagenames="org.openscience.cdk.test.*">
            <classpath refid="project.class.path" />

            <doclet name="com.sun.tools.doclets.doccheck.DocCheck"
                    path="jar/doccheck.jar" />
            <package name="org.openscience.cdk"/>
            <sourcepath>
                <pathelement path="${src}"/>
            </sourcepath>
        </javadoc>
    </target>

    <target name="javadoc-core">
        <mkdir dir="reports/javadoc/core/"/>
        <javadoc private="false" public="true"
                 destdir="reports/javadoc/core/"
                 excludepackagenames="org.openscience.cdk.test.*">
            <classpath refid="project.class.path" />

            <doclet name="com.sun.tools.doclets.doccheck.DocCheck"
                    path="jar/doccheck.jar" />
            <fileset dir="${src}">
                <includesfile name="${src}/core.javafiles"/>
            </fileset>
            <sourcepath>
                <pathelement path="${src}"/>
            </sourcepath>
        </javadoc>
    </target>

    <target name="javadoc-standard">
        <mkdir dir="reports/javadoc/standard/"/>
        <javadoc private="false" public="true"
                 destdir="reports/javadoc/standard/"
                 excludepackagenames="org.openscience.cdk.test.*">
            <classpath refid="project.class.path" />

            <doclet name="com.sun.tools.doclets.doccheck.DocCheck"
                    path="jar/doccheck.jar" />
            <fileset dir="${src}">
                <includesfile name="${src}/standard.javafiles"/>
            </fileset>
            <sourcepath>
                <pathelement path="${src}"/>
            </sourcepath>
        </javadoc>
    </target>

    <target name="javadoc-io">
        <mkdir dir="reports/javadoc/io/"/>
        <javadoc private="false" public="true"
                 destdir="reports/javadoc/io/"
                 excludepackagenames="org.openscience.cdk.test.*">
            <classpath refid="project.class.path" />

            <doclet name="com.sun.tools.doclets.doccheck.DocCheck"
                    path="jar/doccheck.jar" />
            <fileset dir="${src}">
                <includesfile name="${src}/io.javafiles"/>
            </fileset>
            <sourcepath>
                <pathelement path="${src}"/>
            </sourcepath>
        </javadoc>
    </target>

    <target name="javadoc-render">
        <mkdir dir="reports/javadoc/render/"/>
        <javadoc private="false" public="true"
                 destdir="reports/javadoc/render/"
                 excludepackagenames="org.openscience.cdk.test.*">
            <classpath refid="project.class.path" />

            <doclet name="com.sun.tools.doclets.doccheck.DocCheck"
                    path="jar/doccheck.jar" />
            <fileset dir="${src}">
                <includesfile name="${src}/render.javafiles"/>
            </fileset>
            <sourcepath>
                <pathelement path="${src}"/>
            </sourcepath>
        </javadoc>
    </target>

    <target name="javadoc-extra">
        <mkdir dir="reports/javadoc/extra/"/>
        <javadoc private="false" public="true"
                 destdir="reports/javadoc/extra/"
                 excludepackagenames="org.openscience.cdk.test.*">
            <classpath refid="project.class.path" />

            <doclet name="com.sun.tools.doclets.doccheck.DocCheck"
                    path="jar/doccheck.jar" />
            <fileset dir="${src}">
                <includesfile name="${src}/extra.javafiles"/>
            </fileset>
            <sourcepath>
                <pathelement path="${src}"/>
            </sourcepath>
        </javadoc>
    </target>


</project>



